"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{2098:function(e,t,n){n.d(t,{I:function(){return s},b:function(){return c}});var r=n(7437),o=n(458),a=n(8729);function i(e){let{children:t,direction:n,isActive:a,blur:i}=e;return(0,r.jsxs)("span",{className:"".concat(i?"bg-surface-main/50 backdrop-blur-xl":""," inline-flex flex-row font-bold select-none"),children:["hidden"===n?null:(0,r.jsx)("span",{className:"grid place-content-center w-11 h-11",children:(0,r.jsx)("span",{className:"inline-flex transition-transform motion-reduce:transition-none rotate-".concat(n," group-hover:scale-125 group-disabled:!scale-100 content-center text-3xl leading-none group-disabled:text-button-disabled"),children:"none"!==n?(0,r.jsx)(o.Eh,{}):(0,r.jsx)(o.Cd,{})})}),(0,r.jsx)("span",{className:"transition-colors motion-reduce:transition-none ".concat(a?"bg-button-active group-hover:bg-button-activehover":"bg-button-normal group-hover:bg-button-normalhover"," group-disabled:bg-button-disabled group-disabled:text-button-textdisabled text-white px-1 pb-2 content-center text-4xl leading-none"),children:t})]})}function s(e){let{children:t,href:n,direction:o,isActive:s,blur:c,...l}=e;return(0,r.jsx)(a.r,{href:n,className:"group inline-flex w-fit focus-visible:ring-offset-4",...l,children:(0,r.jsx)(i,{direction:o,isActive:s,blur:c,children:t})})}function c(e){let{children:t,direction:n,blur:o,className:a,...s}=e;return(0,r.jsx)("button",{className:"group inline-flex w-fit focus-visible:ring-offset-4 ".concat(a),...s,children:(0,r.jsx)(i,{direction:n,blur:o,children:t})})}},458:function(e,t,n){n.d(t,{Cd:function(){return i},EC:function(){return c},Eh:function(){return a},FG:function(){return u},UM:function(){return l},Ux:function(){return d},gN:function(){return s},v6:function(){return f}});var r=n(7437);n(2265);let o={height:"1em",width:"auto",display:"inline"};function a(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...o,...e},children:(0,r.jsx)("polygon",{stroke:"none",points:"16 13.2 6.8 4 11 4 11 0 4 0 0 0 0 4 0 11 4 11 4 6.8 13.2 16 16 13.2"})})}function i(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...o,...e},children:(0,r.jsx)("circle",{r:6,cx:8,cy:8})})}function s(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",style:{...o,...e},children:(0,r.jsx)("path",{d:"M15.25 13.5h-4a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0V12h3.25a.75.75 0 0 1 0 1.5ZM12 2C6.478 2 2 6.478 2 12s4.478 10 10 10 10-4.478 10-10S17.522 2 12 2Z"})})}function c(e){return(0,r.jsx)("svg",{height:16,fill:"currentColor",viewBox:"0 0 100 100",...e,children:(0,r.jsx)("circle",{cx:"50",cy:"50",r:"50"})})}function l(e){return(0,r.jsx)("svg",{height:16,fill:"currentColor",viewBox:"0 0 100 85",...e,children:(0,r.jsx)("polygon",{points:"50 0, 100 85, 0 85"})})}function u(e){return(0,r.jsx)("svg",{height:16,fill:"currentColor",viewBox:"0 0 100 100",...e,children:(0,r.jsx)("rect",{width:"100",height:"100"})})}function d(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...e},children:[(0,r.jsx)("polygon",{className:"fill-surface-text",points:"8 .6 5.7 5.7 0 6.3 4.3 10 3.1 15.5 8 12.6 12.9 15.5 11.7 10 16 6.3 10.3 5.7 8 .6 8 .6"}),(0,r.jsx)("polyline",{className:"fill-surface-main",points:"8 4.5 8.8 6.4 9.2 7.2 10.1 7.3 12.1 7.5 10.7 8.8 9.9 9.4 10.1 10.3 10.6 12.3 8.8 11.2 8 10.7 7.2 11.2 5.4 12.3 5.9 10.3 6.1 9.4 5.3 8.8 3.9 7.5 5.9 7.3 6.8 7.2 7.2 6.4 8 4.5"})]})}function f(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...e},children:(0,r.jsx)("polygon",{points:"8 .6 5.7 5.7 0 6.3 4.3 10 3.1 15.5 8 12.6 12.9 15.5 11.7 10 16 6.3 10.3 5.7 8 .6 8 .6"})})}},217:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(7437),o=n(2265),a=n(6463),i=n(3444),s=n(126),c=n(2098);function l(e){let{authToken:t}=e,[n,l]=(0,o.useState)(null),u=(0,a.useRouter)();(0,o.useEffect)(()=>{(async()=>{t&&l(await(0,s.ob)({authToken:t}))})()},[t]);let d=(0,o.useCallback)(()=>{(0,i.uB)({authToken:t}),u.push("/profile")},[u,t]);return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"font-bold text-4xl",children:"Log in to UIUCTF 2024"}),(0,r.jsxs)("p",{children:["You will be logged in as ",(0,r.jsx)("strong",{children:n.name}),"."]}),(0,r.jsx)(c.b,{direction:"e",onClick:d,children:"Log in"})]}):null}},3444:function(e,t,n){n.d(t,{A9:function(){return l},T:function(){return s},kS:function(){return i},uB:function(){return o},x4:function(){return a},z2:function(){return c}});var r=n(7269);n(6463);let o=e=>{let{authToken:t}=e;localStorage.token=t},a=async e=>{let{teamToken:t,ctftimeToken:n}=e,o=await(0,r.WY)("POST","/auth/login",{teamToken:t,ctftimeToken:n});switch(o.kind){case"goodLogin":return{authToken:o.data.authToken};case"badTokenVerification":return{teamToken:o.message};case"badUnknownUser":return{badUnknownUser:!0};default:return{teamToken:"Unknown response from server, please contact ctf administrator"}}},i=()=>{localStorage.removeItem("token")},s=async e=>{let{verifyToken:t}=e,n=await(0,r.WY)("POST","/auth/verify",{verifyToken:t});switch(n.kind){case"goodRegister":case"goodVerify":return{authToken:n.data.authToken};case"goodEmailSet":return{emailSet:!0};default:return{verifyToken:n.message}}},c=async e=>{let{email:t,name:n,ctftimeToken:o,recaptchaCode:a}=e,i=await(0,r.WY)("POST","/auth/register",{email:t,name:n,ctftimeToken:o,recaptchaCode:a});switch(i.kind){case"goodRegister":return localStorage.setItem("token",i.data.authToken),{registerSuccess:!0};case"goodVerifySent":return{verifySent:!0};case"badEmail":case"badKnownEmail":case"badCompetitionNotAllowed":return{errors:{email:i.message}};case"badKnownName":return{errors:{name:i.message},data:i.data};case"badName":return{errors:{name:i.message}}}},l=async e=>{let{email:t,recaptchaCode:n}=e,o=await(0,r.WY)("POST","/auth/recover",{email:t,recaptchaCode:n});return"goodVerifySent"===o.kind?{verifySent:!0}:{errors:{email:o.message}}}},126:function(e,t,n){n.d(t,{c2:function(){return o},k$:function(){return i},nd:function(){return l},ob:function(){return a},s:function(){return c},sG:function(){return s}});var r=n(7269);let o=async()=>{let e=await(0,r.WY)("GET","/users/me");return(0,r._y)({resp:e,valid:["goodUserData"]})},a=async e=>{let{authToken:t}=e,{data:n}=await(await fetch("".concat("https://rctf.2024.uiuc.tf","/api/v1/users/me"),{headers:{authorization:"Bearer ".concat(t)}})).json();return n},i=async e=>{let t=await(0,r.WY)("GET","/users/".concat(encodeURIComponent(e)));return(0,r._y)({resp:t,valid:["goodUserData"]})},s=async e=>{let{name:t,division:n}=e,o=await(0,r.WY)("PATCH","/users/me",{name:t,division:n});if("badRateLimit"===o.kind){let e;let t=Math.floor(o.data.timeLeft/1e3),n=Math.floor(t/60);return e=0===n?"".concat(t," seconds"):"".concat(n," minutes"),{error:"Please wait ".concat(e," before trying this again")}}return(0,r._y)({resp:o,valid:["goodUserUpdate"]})},c=async e=>{let{email:t,recaptchaCode:n}=e,o=await(0,r.WY)("PUT","/users/me/auth/email",{email:t,recaptchaCode:n});return(0,r._y)({resp:o,valid:["goodVerifySent","goodEmailSet"],resolveDataMessage:!0})},l=async()=>{let e=await(0,r.WY)("DELETE","/users/me/auth/email");return(0,r._y)({resp:e,valid:["goodEmailRemoved","badEmailNoExists"],resolveDataMessage:!0})}},7269:function(e,t,n){n.d(t,{WY:function(){return a},_y:function(){return o}}),n(6463);let r=()=>{localStorage.removeItem("token")},o=e=>{let{resp:t,valid:n,resolveDataMessage:r}=e;return n.includes(t.kind)?r?{data:t.message}:{data:t.data}:{error:t.message}},a=(e,t,n)=>{let o=null,a="";"GET"===e&&n?a="?"+Object.keys(n).filter(e=>void 0!==n[e]).map(e=>"".concat(e,"=").concat(encodeURIComponent(n[e]))).join("&"):o=n;let i={Authorization:"Bearer ".concat(localStorage.getItem("token"))};return o&&(i["Content-Type"]="application/json"),fetch("".concat("https://rctf.2024.uiuc.tf","/api/v1").concat(t).concat(a),{method:e,headers:i,body:o&&JSON.stringify(o)}).then(e=>e.json()).then(e=>("badToken"===e.kind&&r(),e)).catch(e=>{console.debug(e)})}}}]);