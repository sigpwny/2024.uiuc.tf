(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6914:function(e,n,t){Promise.resolve().then(t.bind(t,8120))},8120:function(e,n,t){"use strict";t.d(n,{ProfileContext:function(){return w}});var r=t(7437),a=t(2265),s=t(6463),o=t(8726),l=t(3444),i=t(126),c=t(5758);let u=e=>{let n=String(e);if(e>=11&&e<=13)n+="th place";else switch(e%10){case 1:n+="st place";break;case 2:n+="nd place";break;case 3:n+="rd place";break;default:n+="th place"}return n};var d=t(2098),f=t(9966),x=t(458),h=t(2886),m=t(9320);function g(e){let{name:n,score:t,globalPlace:a,isPrivate:s}=e;return(0,r.jsxs)("div",{className:"panel flex flex-col gap-4 w-full",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:n}),(0,r.jsx)("hr",{}),0===t?(0,r.jsx)("p",{children:"No passengers delivered"}):(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:t})," passengers delivered"]}),0===t?(0,r.jsx)("p",{children:"Unranked"}):(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:a})," across all teams"]})]})}function p(e){let{solves:n}=e;return n&&0!==n.length?(0,r.jsxs)("div",{className:"panel flex flex-col gap-4",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"Solves"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("div",{className:"bg-surface-panel border-b-2 border-dashed mb-2 px-4 py-1",children:(0,r.jsxs)("div",{className:"flex flex-row w-full",children:[(0,r.jsx)("span",{className:"w-1/4 shrink-0",children:(0,r.jsx)("strong",{children:"Category"})}),(0,r.jsx)("span",{className:"w-1/4 flex-auto",children:(0,r.jsx)("strong",{children:"Challenge"})}),(0,r.jsx)("span",{className:"w-1/4 flex-auto",children:(0,r.jsx)("strong",{children:"Time"})}),(0,r.jsx)("span",{className:"w-1/4 shrink-0",children:(0,r.jsx)("strong",{children:"Passengers"})})]})}),(0,r.jsx)("div",{className:"flex flex-col break-words",children:n.map(e=>(0,r.jsxs)("div",{className:"flex flex-row w-full px-4",children:[(0,r.jsx)("span",{className:"w-1/4 shrink-0",children:e.category}),(0,r.jsx)("span",{className:"w-1/4 shrink-0",children:e.name}),(0,r.jsx)("span",{className:"w-1/4 shrink-0",children:c.SY(e.createdAt)}),(0,r.jsx)("span",{className:"w-1/4 shrink-0",children:e.points})]},e.id))})]})]}):(0,r.jsxs)("div",{className:"panel flex flex-col gap-4 text-center",children:[(0,r.jsx)("span",{className:"text-4xl",children:(0,r.jsx)(x.gN,{})}),(0,r.jsx)("p",{className:"font-semibold text-2xl",children:"This team has no solves."})]})}function v(e){let{teamToken:n}=e,[t,s]=(0,a.useState)(!1),[l,i]=(0,a.useState)(n);return(0,a.useEffect)(()=>{i("".concat(location.origin,"/login?token=").concat(encodeURIComponent(n)))},[n]),(0,r.jsxs)("div",{className:"panel flex flex-col gap-4",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"Team Invite"}),(0,r.jsx)("p",{children:"Send this invite URL to your teammates so they can log in."}),(0,r.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,r.jsx)(d.b,{direction:"hidden",onClick:()=>{if(navigator.clipboard)try{navigator.clipboard.writeText(l).then(()=>{o.ZP.success("Copied team invite URL to clipboard")})}catch(e){}},children:"Copy"}),(0,r.jsx)(d.b,{direction:"hidden",onClick:()=>s(!t),children:t?"Hide":"Show"})]}),(0,r.jsx)("p",{className:"bg-surface-main text-lg select-all ".concat(t?"":"hidden"),children:(0,r.jsx)("code",{children:l})})]})}function j(){let e=(0,s.useRouter)(),[n,t]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.b,{disabled:n,direction:"e",onClick:()=>{t(!0)},children:"Log out"}),(0,r.jsx)(m.Z,{open:n,onClose:()=>t(!1),children:(0,r.jsxs)("div",{className:"panel flex flex-col m-4 gap-4",children:[(0,r.jsx)("p",{children:"Are you sure you want to log out? You will only be logged out of the current device."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-between",children:[(0,r.jsx)(d.b,{direction:"w",onClick:()=>t(!1),children:"Cancel"}),(0,r.jsx)(d.b,{direction:"e",onClick:()=>{(0,l.kS)(),e.push("/")},children:"Log out"})]})]})})]})}function b(e){let{name:n,email:t,divisionId:s,allowedDivisions:l,onUpdate:c}=e,[u,f]=(0,a.useState)(n),[x,m]=(0,a.useState)(t),[g,p]=(0,a.useState)(s),[v,j]=(0,a.useState)(!1),b=async e=>{let r;e.preventDefault();let a=!1;if(u!=n||g!=s){a=!0,j(!0);let e=await(0,i.sG)({name:n===u?void 0:u,division:s===g?void 0:g});if(j(!1),null==e?void 0:e.error){o.ZP.error(e.error);return}o.ZP.success("Profile updated"),c({name:e.data.user.name,divisionId:e.data.user.division})}if(x!=t){if(a=!0,j(!0),""===x?(j(!0),r=await(0,i.nd)()):(j(!0),r=await(0,i.s)({email:x,recaptchaCode:void 0})),j(!1),null==r?void 0:r.error){o.ZP.error(r.error);return}o.ZP.success(r.data),c({email:x})}a||(0,o.ZP)("Nothing to update!")};return(0,r.jsxs)("div",{className:"panel flex flex-col gap-4",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"Update Team"}),(0,r.jsx)("p",{children:"This will change how your team appears on the scoreboard. You may only change your team's name once every 10 minutes."}),(0,r.jsxs)("form",{className:"flex flex-col gap-2",onSubmit:e=>b(e),children:[(0,r.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Team Name"}),(0,r.jsx)(h.Z,{className:"px-2 py-1 bg-surface-main focus-visible:ring-offset-4 focus-visible:ring-offset-surface-panel",autoComplete:"username",autoCorrect:"off",autoCapitalize:"off",name:"name",placeholder:"Enter new team name here",maxLength:64,minLength:2,type:"text",value:u,onChange:e=>{f(e.target.value)}})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Email"}),(0,r.jsx)(h.Z,{className:"px-2 py-1 bg-surface-main focus-visible:ring-offset-4 focus-visible:ring-offset-surface-panel",autoComplete:"email",autoCorrect:"off",autoCapitalize:"off",name:"email",placeholder:"Enter new email here",type:"email",value:x,onChange:e=>{m(e.target.value)}})]}),(0,r.jsx)(d.b,{className:"mt-4",direction:"n",type:"submit",disabled:v,children:"Update"})]})]})}function w(){var e;let n=(0,s.useSearchParams)(),[t,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),m=null===(e=n.get("id"))||void 0===e?void 0:e.toLowerCase(),w=null==m||"me"==m;if((0,a.useEffect)(()=>{w?(0,i.c2)().then(e=>{e.error?o.ZP.error(e.error):h(e.data),l(!0)}):(0,i.k$)(m).then(e=>{e.error?o.ZP.error("Profile not found"):h(e.data),l(!0)})},[m,w]),!t)return(0,r.jsx)("div",{className:"panel flex flex-col gap-4 max-w-prose mx-auto",children:(0,r.jsx)("p",{className:"font-bold text-4xl",children:"Loading..."})});if(null!=c)return(0,r.jsxs)("div",{className:"panel flex flex-col gap-4 max-w-prose mx-auto",children:[(0,r.jsx)("h1",{className:"font-bold text-4xl",children:"Error"}),(0,r.jsx)("p",{children:c})]});if(null!==x){let{name:e,email:n,divisionId:t,score:a,solves:s,teamToken:o,ctftimeId:l,allowedDivisions:i}=x,c=u(x.globalPlace);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row min-w-0 grow-0 shrink-0 gap-4 lg:gap-8 break-words w-full",children:[w?(0,r.jsxs)("aside",{className:"flex flex-col gap-4 lg:gap-8 lg:basis-1/3 grow-0 shrink-0 min-w-0 order-last lg:order-first",children:[(0,r.jsx)(v,{teamToken:x.teamToken}),(0,r.jsx)(b,{name:e,email:n,divisionId:t,allowedDivisions:i,onUpdate:e=>{h({...x,...e})}}),(0,r.jsx)("div",{className:"panel flex flex-col gap-4",children:(0,r.jsx)(j,{})})]}):null,(0,r.jsxs)("div",{className:"flex flex-col gap-4 lg:gap-8 lg:basis-2/3 w-full ".concat(w?"":"max-w-prose mx-auto"," grow-0 shrink-0 min-w-0"),children:[(0,r.jsx)(g,{name:e,score:a,globalPlace:c,ctftimeId:l,isPrivate:w}),(0,r.jsx)(p,{solves:s})]})]}),(0,r.jsx)(f.Z,{})]})}return(0,r.jsx)(r.Fragment,{})}},2098:function(e,n,t){"use strict";t.d(n,{I:function(){return l},b:function(){return i}});var r=t(7437),a=t(458),s=t(8729);function o(e){let{children:n,direction:t,isActive:s,blur:o}=e;return(0,r.jsxs)("span",{className:"".concat(o?"bg-surface-main/50 backdrop-blur-xl":""," inline-flex flex-row font-bold select-none"),children:["hidden"===t?null:(0,r.jsx)("span",{className:"grid place-content-center w-11 h-11",children:(0,r.jsx)("span",{className:"inline-flex transition-transform motion-reduce:transition-none rotate-".concat(t," group-hover:scale-125 group-disabled:!scale-100 content-center text-3xl leading-none group-disabled:text-button-disabled"),children:"none"!==t?(0,r.jsx)(a.Eh,{}):(0,r.jsx)(a.Cd,{})})}),(0,r.jsx)("span",{className:"transition-colors motion-reduce:transition-none ".concat(s?"bg-button-active group-hover:bg-button-activehover":"bg-button-normal group-hover:bg-button-normalhover"," group-disabled:bg-button-disabled group-disabled:text-button-textdisabled text-white px-1 pb-2 content-center text-4xl leading-none"),children:n})]})}function l(e){let{children:n,href:t,direction:a,isActive:l,blur:i,...c}=e;return(0,r.jsx)(s.r,{href:t,className:"group inline-flex w-fit focus-visible:ring-offset-4",...c,children:(0,r.jsx)(o,{direction:a,isActive:l,blur:i,children:n})})}function i(e){let{children:n,direction:t,blur:a,className:s,...l}=e;return(0,r.jsx)("button",{className:"group inline-flex w-fit focus-visible:ring-offset-4 ".concat(s),...l,children:(0,r.jsx)(o,{direction:t,blur:a,children:n})})}},9966:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(7437);function a(){return(0,r.jsx)("footer",{className:"bg-surface-main text-with-links text-center py-8 md:py-16",children:(0,r.jsxs)("p",{className:"max-w-prose mx-auto",children:["\xa9 2024 SIGPwny. UIUCTF 2024's theme is inspired by ",(0,r.jsx)("a",{href:"https://dinopoloclub.com/games/mini-metro/",target:"_blank",rel:"noopener noreferrer",children:"Mini Metro"})," and is not affiliated, authorized, or endorsed by Dinosaur Polo Club. Powered by ",(0,r.jsx)("a",{href:"https://rctf.redpwn.net/",target:"_blank",rel:"noopener noreferrer",children:"rCTF"}),"."]})})}},458:function(e,n,t){"use strict";t.d(n,{Cd:function(){return o},EC:function(){return i},Eh:function(){return s},FG:function(){return u},UM:function(){return c},Ux:function(){return d},gN:function(){return l},v6:function(){return f}});var r=t(7437);t(2265);let a={height:"1em",width:"auto",display:"inline"};function s(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...a,...e},children:(0,r.jsx)("polygon",{stroke:"none",points:"16 13.2 6.8 4 11 4 11 0 4 0 0 0 0 4 0 11 4 11 4 6.8 13.2 16 16 13.2"})})}function o(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...a,...e},children:(0,r.jsx)("circle",{r:6,cx:8,cy:8})})}function l(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",style:{...a,...e},children:(0,r.jsx)("path",{d:"M15.25 13.5h-4a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0V12h3.25a.75.75 0 0 1 0 1.5ZM12 2C6.478 2 2 6.478 2 12s4.478 10 10 10 10-4.478 10-10S17.522 2 12 2Z"})})}function i(e){return(0,r.jsx)("svg",{height:16,fill:"currentColor",viewBox:"0 0 100 100",...e,children:(0,r.jsx)("circle",{cx:"50",cy:"50",r:"50"})})}function c(e){return(0,r.jsx)("svg",{height:16,fill:"currentColor",viewBox:"0 0 100 85",...e,children:(0,r.jsx)("polygon",{points:"50 0, 100 85, 0 85"})})}function u(e){return(0,r.jsx)("svg",{height:16,fill:"currentColor",viewBox:"0 0 100 100",...e,children:(0,r.jsx)("rect",{width:"100",height:"100"})})}function d(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...e},children:[(0,r.jsx)("polygon",{className:"fill-surface-text",points:"8 .6 5.7 5.7 0 6.3 4.3 10 3.1 15.5 8 12.6 12.9 15.5 11.7 10 16 6.3 10.3 5.7 8 .6 8 .6"}),(0,r.jsx)("polyline",{className:"fill-surface-main",points:"8 4.5 8.8 6.4 9.2 7.2 10.1 7.3 12.1 7.5 10.7 8.8 9.9 9.4 10.1 10.3 10.6 12.3 8.8 11.2 8 10.7 7.2 11.2 5.4 12.3 5.9 10.3 6.1 9.4 5.3 8.8 3.9 7.5 5.9 7.3 6.8 7.2 7.2 6.4 8 4.5"})]})}function f(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",style:{...e},children:(0,r.jsx)("polygon",{points:"8 .6 5.7 5.7 0 6.3 4.3 10 3.1 15.5 8 12.6 12.9 15.5 11.7 10 16 6.3 10.3 5.7 8 .6 8 .6"})})}},2886:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(7437);function a(e){let{errors:n,className:t,...a}=e,s=a.name,o=s?null==n?void 0:n[s]:void 0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:"".concat(t," ").concat(void 0!==o?"!border-2 !border-red-500":""),...a}),o&&(0,r.jsx)("span",{className:"text-red-500",children:o})]})}t(2265)},9320:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(7437),a=t(2265);function s(e){let{open:n,onClose:t,children:s}=e,[o,l]=(0,a.useState)(n);return(0,a.useEffect)(()=>{if(n)l(!0);else{let e=setTimeout(()=>{l(!1)},200);return()=>clearTimeout(e)}},[n]),(0,a.useEffect)(()=>{function e(e){"Escape"===e.key&&t()}if(n)return document.addEventListener("keyup",e),()=>document.removeEventListener("keyup",e)},[n,t]),n||o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 backdrop-blur-sm",onClick:t,"aria-label":"Close"}),(0,r.jsx)("div",{className:"fixed top-0 bottom-0 left-0 right-0 z-50 pointer-events-none modal-fade-in",role:"document",children:(0,r.jsx)("div",{className:"max-w-prose mx-auto overflow-y-auto custom-scrollbar max-h-screen pointer-events-auto",children:s})})]}):null}},3444:function(e,n,t){"use strict";t.d(n,{A9:function(){return c},T:function(){return l},kS:function(){return o},uB:function(){return a},x4:function(){return s},z2:function(){return i}});var r=t(7269);t(6463);let a=e=>{let{authToken:n}=e;localStorage.token=n},s=async e=>{let{teamToken:n,ctftimeToken:t}=e,a=await(0,r.WY)("POST","/auth/login",{teamToken:n,ctftimeToken:t});switch(a.kind){case"goodLogin":return{authToken:a.data.authToken};case"badTokenVerification":return{teamToken:a.message};case"badUnknownUser":return{badUnknownUser:!0};default:return{teamToken:"Unknown response from server, please contact ctf administrator"}}},o=()=>{localStorage.removeItem("token")},l=async e=>{let{verifyToken:n}=e,t=await(0,r.WY)("POST","/auth/verify",{verifyToken:n});switch(t.kind){case"goodRegister":case"goodVerify":return{authToken:t.data.authToken};case"goodEmailSet":return{emailSet:!0};default:return{verifyToken:t.message}}},i=async e=>{let{email:n,name:t,ctftimeToken:a,recaptchaCode:s}=e,o=await(0,r.WY)("POST","/auth/register",{email:n,name:t,ctftimeToken:a,recaptchaCode:s});switch(o.kind){case"goodRegister":return localStorage.setItem("token",o.data.authToken),{registerSuccess:!0};case"goodVerifySent":return{verifySent:!0};case"badEmail":case"badKnownEmail":case"badCompetitionNotAllowed":return{errors:{email:o.message}};case"badKnownName":return{errors:{name:o.message},data:o.data};case"badName":return{errors:{name:o.message}}}},c=async e=>{let{email:n,recaptchaCode:t}=e,a=await(0,r.WY)("POST","/auth/recover",{email:n,recaptchaCode:t});return"goodVerifySent"===a.kind?{verifySent:!0}:{errors:{email:a.message}}}},126:function(e,n,t){"use strict";t.d(n,{c2:function(){return a},k$:function(){return o},nd:function(){return c},ob:function(){return s},s:function(){return i},sG:function(){return l}});var r=t(7269);let a=async()=>{let e=await(0,r.WY)("GET","/users/me");return(0,r._y)({resp:e,valid:["goodUserData"]})},s=async e=>{let{authToken:n}=e,{data:t}=await(await fetch("/api/v1/users/me",{headers:{authorization:"Bearer ".concat(n)}})).json();return t},o=async e=>{let n=await(0,r.WY)("GET","/users/".concat(encodeURIComponent(e)));return(0,r._y)({resp:n,valid:["goodUserData"]})},l=async e=>{let{name:n,division:t}=e,a=await(0,r.WY)("PATCH","/users/me",{name:n,division:t});if("badRateLimit"===a.kind){let e;let n=Math.floor(a.data.timeLeft/1e3),t=Math.floor(n/60);return e=0===t?"".concat(n," seconds"):"".concat(t," minutes"),{error:"Please wait ".concat(e," before trying this again")}}return(0,r._y)({resp:a,valid:["goodUserUpdate"]})},i=async e=>{let{email:n,recaptchaCode:t}=e,a=await(0,r.WY)("PUT","/users/me/auth/email",{email:n,recaptchaCode:t});return(0,r._y)({resp:a,valid:["goodVerifySent","goodEmailSet"],resolveDataMessage:!0})},c=async()=>{let e=await(0,r.WY)("DELETE","/users/me/auth/email");return(0,r._y)({resp:e,valid:["goodEmailRemoved","badEmailNoExists"],resolveDataMessage:!0})}},7269:function(e,n,t){"use strict";t.d(n,{WY:function(){return s},_y:function(){return a}}),t(6463);let r=()=>{localStorage.removeItem("token")},a=e=>{let{resp:n,valid:t,resolveDataMessage:r}=e;return t.includes(n.kind)?r?{data:n.message}:{data:n.data}:{error:n.message}},s=(e,n,t)=>{let a=null,s="";"GET"===e&&t?s="?"+Object.keys(t).filter(e=>void 0!==t[e]).map(e=>"".concat(e,"=").concat(encodeURIComponent(t[e]))).join("&"):a=t;let o={Authorization:"Bearer ".concat(localStorage.getItem("token"))};return a&&(o["Content-Type"]="application/json"),fetch("/api/v1".concat(n).concat(s),{method:e,headers:o,body:a&&JSON.stringify(a)}).then(e=>e.json()).then(e=>("badToken"===e.kind&&r(),e)).catch(e=>{console.debug(e)})}},5758:function(e,n,t){"use strict";t.d(n,{SY:function(){return a}});let r=e=>{let n=new Date(e);return"".concat(n.toLocaleDateString()," ").concat(n.toLocaleTimeString())},a=e=>{let n=Math.floor((Date.now()-e)/1e3);if(n<60)return"just now";let t=Math.floor(n/60);if(t<60)return"".concat(t," minute").concat(1===t?"":"s"," ago");let a=Math.floor(t/60);if(a<24)return"".concat(a," hour").concat(1===a?"":"s"," ago");let s=Math.floor(a/24);return s<7?"".concat(s," day").concat(1===s?"":"s"," ago"):r(e)}}},function(e){e.O(0,[729,726,971,23,744],function(){return e(e.s=6914)}),_N_E=e.O()}]);