(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{8527:function(e,a,t){Promise.resolve().then(t.bind(t,9187))},9187:function(e,a,t){"use strict";t.d(a,{default:function(){return f}});var r,n,s=t(7437),o=t(2265),i=t(6463),l=t(7269);let c=e=>{let{division:a,limit:t=100,offset:r=0}=e;return(0,l.WY)("GET","/leaderboard/now",{division:a,limit:t,offset:r})};var d=t(126),u=t(8729),h=t(1426);function m(e){let{total:a,scoreboard:t,currentProfile:r}=e;return(0,s.jsxs)("div",{className:"max-h-96 overflow-auto md:text-lg custom-scrollbar",children:[(0,s.jsx)("div",{className:"sticky top-0 bg-surface-panel border-b-2 border-dashed mb-2 px-4 py-1",children:(0,s.jsxs)("div",{className:"flex flex-row w-full",children:[(0,s.jsx)("span",{className:"w-[8ch] shrink-0",children:(0,s.jsx)("strong",{children:"Rank"})}),(0,s.jsx)("span",{className:"min-w-0 flex-auto",children:(0,s.jsx)("strong",{children:"Team"})}),(0,s.jsx)("span",{className:"w-1/4 shrink-0",children:(0,s.jsx)("strong",{children:"Passengers"})})]})}),(0,s.jsx)("div",{className:"flex flex-col break-words",children:t.map(e=>{let t=r&&e.name===r.name;return(0,s.jsxs)(u.r,{href:"/profile?id=".concat(e.id),onClick:()=>(0,h.N)("e"),className:"flex flex-row w-full px-4 ".concat(t?"sticky top-10 bottom-0 bg-button-normal hover:bg-button-normalhover text-white":"hover:bg-surface-panelalt hover:text-surface-textalt"),children:[(0,s.jsx)("span",{className:"w-[8ch] shrink-0",children:e.rank}),(0,s.jsxs)("span",{className:"min-w-0 flex-auto",children:[e.name,t?" (top ".concat(Math.ceil(e.rank/a*100),"%)"):""]}),(0,s.jsx)("span",{className:"w-1/4 shrink-0",children:e.score})]},e.id)})})]})}function f(){let[e,a]=(0,o.useState)(0),[t,r]=(0,o.useState)({page:1,pageSize:3e3}),[n,l]=(0,o.useState)([]),[u,h]=(0,o.useState)(0),[f,g]=(0,o.useState)(null),[x,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{var e,a;p((null===(a=window)||void 0===a?void 0:null===(e=a.localStorage)||void 0===e?void 0:e.getItem("token"))!==null)},[]);let v=(0,i.useSearchParams)();return v.has("page")&&r({...t,page:Number(v.get("page"))}),v.has("pageSize")&&r({...t,pageSize:Number(v.get("pageSize"))}),v.has("division")&&r({...t,division:v.get("division")}),(0,o.useEffect)(()=>{x&&(0,d.c2)().then(e=>{e.error||g(e.data)}),(async()=>{let e="all"===t.division?void 0:t.division;try{let r=await c({division:e,offset:(t.page-1)*t.pageSize,limit:t.pageSize});switch(r.kind){case"goodLeaderboard":a(3);break;case"badNotStarted":a(1);return;default:a(2);return}l(r.data.leaderboard.map((e,a)=>({...e,rank:a+1+(t.page-1)*t.pageSize}))),h(r.data.total)}catch(e){}})()},[t,x]),(0,s.jsx)("div",{className:"panel-nolinks flex flex-col gap-4 max-w-prose mx-auto",children:0===e?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("p",{className:"font-bold text-4xl",children:"Loading..."})}):2===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-bold text-4xl",children:"Error"}),(0,s.jsx)("p",{children:"There was an error loading the scoreboard. Please try again later."})]}):1===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-bold text-4xl",children:"UIUCTF 2024 has not started yet."}),(0,s.jsx)("p",{className:"",children:"The scoreboard will be available once the competition starts and teams begin solving challenges."})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m,{total:u,scoreboard:n,currentProfile:f})})})}(r=n||(n={}))[r.Pending=0]="Pending",r[r.NotStarted=1]="NotStarted",r[r.Error=2]="Error",r[r.Loaded=3]="Loaded"},126:function(e,a,t){"use strict";t.d(a,{c2:function(){return n},k$:function(){return o},nd:function(){return c},ob:function(){return s},s:function(){return l},sG:function(){return i}});var r=t(7269);let n=async()=>{let e=await(0,r.WY)("GET","/users/me");return(0,r._y)({resp:e,valid:["goodUserData"]})},s=async e=>{let{authToken:a}=e,{data:t}=await(await fetch("/api/v1/users/me",{headers:{authorization:"Bearer ".concat(a)}})).json();return t},o=async e=>{let a=await(0,r.WY)("GET","/users/".concat(encodeURIComponent(e)));return(0,r._y)({resp:a,valid:["goodUserData"]})},i=async e=>{let{name:a,division:t}=e,n=await(0,r.WY)("PATCH","/users/me",{name:a,division:t});if("badRateLimit"===n.kind){let e;let a=Math.floor(n.data.timeLeft/1e3),t=Math.floor(a/60);return e=0===t?"".concat(a," seconds"):"".concat(t," minutes"),{error:"Please wait ".concat(e," before trying this again")}}return(0,r._y)({resp:n,valid:["goodUserUpdate"]})},l=async e=>{let{email:a,recaptchaCode:t}=e,n=await(0,r.WY)("PUT","/users/me/auth/email",{email:a,recaptchaCode:t});return(0,r._y)({resp:n,valid:["goodVerifySent","goodEmailSet"],resolveDataMessage:!0})},c=async()=>{let e=await(0,r.WY)("DELETE","/users/me/auth/email");return(0,r._y)({resp:e,valid:["goodEmailRemoved","badEmailNoExists"],resolveDataMessage:!0})}}},function(e){e.O(0,[729,426,971,23,744],function(){return e(e.s=8527)}),_N_E=e.O()}]);